\documentclass[a4paper,10pt]{report}

%% \documentclass[a4paper,10pt,twocolumn]{article}
\usepackage{titling}
\title{An Introduction to Programming in C}

\author{David Morris}

\usepackage[cm]{fullpage}
\usepackage[small,compact]{titlesec}

\usepackage{fancyhdr}
\fancypagestyle{fancyplain}{
  \fancyhf{}
  \fancyhead[L]{\leftmark}
  \fancyfoot[R]{\thepage}
  \fancyfoot[L]{\theauthor}
  \setlength{\headheight}{15pt}
  \setlength{\headsep}{15pt}
}
\pagestyle{fancyplain}

\fancypagestyle{plain}{
  \fancyhf{}
  \fancyfoot[R]{\thepage}
  \setlength{\headheight}{0pt}
  \renewcommand{\headrulewidth}{0pt}
}

\usepackage{listings}
\usepackage{courier}
\usepackage{bashful}

\lstset{
  basicstyle=\ttfamily,
  showstringspaces=false,
  nolol=true
}

\lstdefinestyle{drmCodeStyle}{frame=lines}

\newcommand{\drmcode}[3]{\begin{minipage}{\columnwidth}\lstinputlisting[language={#1},style=drmCodeStyle,caption={#2},name={},nolol=false]{#3}\end{minipage}}
\newcommand{\ccode}[2]{\drmcode{C}{#1}{#2.c}}
\newcommand{\perlcode}[2]{\drmcode{Perl}{#1}{#2.pl}}
\newcommand{\makecode}[2]{\drmcode{Make}{#1}{#2}}

\newcommand{\lisp}{\textsc{Lisp}}
\newcommand{\commonlisp}{\textsc{Common Lisp}}
\newcommand{\car}{\texttt{car}}
\newcommand{\cdr}{\texttt{cdr}}
\newcommand{\cons}{\texttt{cons}}
\newcommand{\hcons}{\texttt{:}}




\newcommand{\gcc}{\texttt{gcc}}
\newcommand{\make}{\texttt{make}}
\newcommand{\ld}{\texttt{ld}}
\newcommand{\ar}{\texttt{ar}}
\newcommand{\nm}{\texttt{nm}}


\bash
./kwgen.pl keywords > keywords.tex
\END

\input{keywords.tex}

\begin{document}

\maketitle

\tableofcontents

\lstlistoflistings

\part{Basics}

\chapter{Introduction}

This document is an introduction to programming using the C language
and ecosystem. It assumes that the reader is previously familiar with
one or more programming languages, and will not appreciate yet another
introduction to \texttt{if} statements and the strange and wonderful
concept of a `variable'.

\section{Conventions used in this document}

\subsection{Terminal Interaction}

We will make extensive use of a \textsc{Unix} or *NIX
shell. \texttt{Bash} is used throughout; it is assumed that anyone
running anything more exotic is capable of dealing with the
differences.

Shell commands and output are presented as follows:

\bash[script,stdout]
echo "Hello"
\END

\noindent
In other words, an instruction to \emph{run} a command is presented
as:

\bash[script]
echo "Hello"
\END

\noindent
note that the \texttt{\%} sign signifies a shell prompt, and should
not be typed into the terminal. Command output is presented as:

\bash[stdout]
echo "Hello"
\END

\noindent
In almost all cases, 

\section{Hello World}

We should begin by confirming that the C programming environment on
your machine is reasonably sane. For this, we use the traditional
``Hello, World'' program. Enter the following program into the text
editor of your choice, and save it as ``hello.c''.

\ccode{\texttt{hello.c}}{hello}

\noindent
Enter the following command into your terminal to compile
the program:

\bash[script,stdout]
gcc -o hello hello.c
\END

\noindent
and finally run the program with:

\bash[script, stdout]
./hello
\END

\noindent{}
If you get error messages, or the output does not appear as shown,
there is little point continuing until these issues have been
resolved. It is assumed that anyone reading this document has
sufficient intelligence and network bandwidth to resolve problems here
on their own.

\chapter{Compilation}

\section{Preprocessing}

\section{Compilation}

\section{Linking}

\subsection{Static Libraries}

\subsection{Dynamic Libraries}

\section{\toolmake}

\chapter{Memory}

\section{The C Memory Model}

\section{Pointers}

\section{Arrays}

\section{Allocation}

\chapter{Debugging}

\chapter{Modules}

\section{Single-Instance Modules}

\section{Multiple-Instance Modules}

\section{Dynamic Interfaces}

\section{Polymorphic Interfaces}

\part{Worked Examples}

\part{Reference}

\chapter{Syntax}

\section{Built-in Types}

\section{Other Common Types}

\section{Variables}

\section{Control Flow}

\section{Arithmetic Operators}

\section{Bitwise Operators}

\chapter{The Standard Library}

\end{document}
